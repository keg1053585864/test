{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/zzwc-study-master/study/pages/component/wm-poster.vue?753e","webpack:///C:/Users/Administrator/Desktop/zzwc-study-master/study/pages/component/wm-poster.vue?5785","webpack:///C:/Users/Administrator/Desktop/zzwc-study-master/study/pages/component/wm-poster.vue?9e09","webpack:///C:/Users/Administrator/Desktop/zzwc-study-master/study/pages/component/wm-poster.vue?3432","webpack:///C:/Users/Administrator/Desktop/zzwc-study-master/study/pages/component/wm-poster.vue"],"names":["_this","name","props","CanvasID","Type","String","default","imgSrc","avatarUrl","QrSrc","Title","TitleColor","LineType","Boolean","PriceTxt","PriceColor","OriginalTxt","OriginalColor","Width","CanvasBg","Referrer","ViewDetails","data","canvasW","canvasH","canvasImgSrc","ctx","methods","OnCanvas","$store","state","posterSrc","userInfo","qrSrc","uni","createCanvasContext","C_W","upx2px","C_P","C_Q","_strlineW","getImageInfo","_imgInfo","_avatarUrl","_QrCode","r","width","height","p","q","imgW","Math","floor","setFillStyle","fillRect","setFontSize","_strLastIndex","_strHeight","_num","i","length","measureText","fillText","substring","strokeStyle","moveTo","lineTo","stroke","drawImage","path","save","x1","y1","w1","h1","r1","beginPath","arcTo","closePath","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","fill","clip","restore","lineWidth","strokeRect","clearRect","draw","ret","$emit","setTimeout","getNewImage","Promise","resolve","errs","src","success","image","fail","err","canvasToTempFilePath","canvasId","quality","res"],"mappings":"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","file":"pages/component/wm-poster.js","sourcesContent":["import { render, staticRenderFns } from \"./wm-poster.vue?vue&type=template&id=25e578f3&\"\nimport script from \"./wm-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./wm-poster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('25e578f3', component.options)\n    } else {\n      api.reload('25e578f3', component.options)\n    }\n    module.hot.accept(\"./wm-poster.vue?vue&type=template&id=25e578f3&\", function () {\n      api.rerender('25e578f3', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/zzwc-study-master/study/pages/component/wm-poster.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=template&id=25e578f3&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!F:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n\nvar _this;\nexport default {\n\tname: 'wm-poster',\n\tprops: {\n\t\tCanvasID: { //CanvasID 等同于 canvas-id\n\t\t\tType: String,\n\t\t\tdefault: 'PosterCanvas'\n\t\t},\n\t\timgSrc: { //展示图\n\t\t\tType: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tavatarUrl: { //头像\n\t\t\tType: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tQrSrc: { //二维码\n\t\t\tType: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tTitle: { //文本内容\n\t\t\tType: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tTitleColor: { //标题颜色\n\t\t\tType: String,\n\t\t\tdefault: '#333333'\n\t\t},\n\t\tLineType: { //标题显示行数\t\t（注超出2行显示会导致画布布局絮乱）\n\t\t\tType: [String, Boolean],\n\t\t\tdefault: true\n\t\t},\n\t\tPriceTxt: { //价格值\n\t\t\tType: String,\n\t\t\tdefault: '99.99'\n\t\t},\n\t\tPriceColor: { //价格颜色\n\t\t\tType: String,\n\t\t\tdefault: '#e31d1a'\n\t\t},\n\t\tOriginalTxt: { //原价值\n\t\t\tType: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tOriginalColor: { //默认颜色（如原价与扫描二维码颜色）\n\t\t\tType: String,\n\t\t\tdefault: '#b8b8b8'\n\t\t},\n\t\tWidth: { //画布宽度  (高度根据图片比例计算 单位upx)\n\t\t\tType: String,\n\t\t\tdefault: 720\n\t\t},\n\t\tCanvasBg: { //canvas画布背景色\n\t\t\tType: String,\n\t\t\tdefault: '#ffffff'\n\t\t},\n\t\tReferrer: { //推荐人信息\n\t\t\tType: String,\n\t\t\tdefault: 'quitter推荐给你'\n\t\t},\n\t\tViewDetails: { //描述提示文字\n\t\t\tType: String,\n\t\t\tdefault: '长按分享或扫码购买'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanvasW: 0,\n\t\t\tcanvasH: 0,\n\t\t\tcanvasImgSrc: '',\n\t\t\tctx: null\n\t\t};\n\t},\n\tmethods: {\n\t\t// _this.OnCanvas()\n\t\tasync OnCanvas() {\n\t\t\t_this = this;\n\t\t\t_this.imgSrc = this.$store.state.posterSrc;\n\t\t\t_this.avatarUrl = this.$store.state.userInfo.avatarUrl;\n\t\t\t_this.QrSrc = this.$store.state.qrSrc;\n\t\t\t_this.ctx = uni.createCanvasContext(_this.CanvasID, this);\n\t\t\tconst C_W = uni.upx2px(_this.Width), //canvas宽度\n\t\t\t\tC_P = uni.upx2px(30), //canvas Paddng 间距\n\t\t\t\tC_Q = uni.upx2px(150); //二维码或太阳码宽高\n\t\t\tlet _strlineW = 0; //文本宽度\n\t\t\tlet _imgInfo = await _this.getImageInfo({\n\t\t\t\timgSrc: _this.imgSrc\n\t\t\t}); //广告图\n\t\t\tlet _avatarUrl = await _this.getImageInfo({\n\t\t\t\timgSrc: _this.avatarUrl\n\t\t\t});\n\t\t\t//头像\n\t\t\tlet _QrCode = await _this.getImageInfo({\n\t\t\t\timgSrc: _this.QrSrc\n\t\t\t});\n\t\t\t//二维码或太阳码\n\t\t\tlet r = [_imgInfo.width, _imgInfo.height];\n\t\t\tlet p = [_avatarUrl.width, _avatarUrl.height];\n\t\t\tlet q = [_QrCode.width, _QrCode.height];\n\t\t\tlet imgW = C_W - C_P * 2;\n\t\t\tif (r[0] != imgW) {\n\t\t\t\tr[1] = Math.floor((imgW / r[0]) * r[1]);\n\t\t\t\tr[0] = imgW;\n\t\t\t}\n\t\t\tif (p[0] != C_Q) {\n\t\t\t\tp[1] = Math.floor((C_Q / p[0]) * p[1]);\n\t\t\t\tp[0] = C_Q;\n\t\t\t}\n\t\t\tif (q[0] != C_Q) {\n\t\t\t\tq[1] = Math.floor((C_Q / q[0]) * q[1]);\n\t\t\t\tq[0] = C_Q;\n\t\t\t}\n\t\t\t_this.canvasW = C_W;\n\t\t\t_this.canvasH = r[1] + q[1] + 100;\n\n\n\t\t\t_this.ctx.setFillStyle(_this.CanvasBg); //canvas背景颜色\n\t\t\t_this.ctx.fillRect(0, 0, C_W, _this.canvasH); //canvas画布大小\n\n\t\t\t//设置文本\n\t\t\t_this.ctx.setFontSize(uni.upx2px(28)); //设置标题字体大小\n\t\t\t_this.ctx.setFillStyle(_this.TitleColor); //设置标题文本颜色\n\t\t\tlet _strLastIndex = 0; //每次开始截取的字符串的索引\n\t\t\tlet _strHeight = r[1] + C_P * 2-5; //绘制字体距离canvas顶部的初始高度\n\t\t\tlet _num = 1;\n\t\t\tfor (let i = 0; i < _this.Title.length; i++) {\n\t\t\t\t_strlineW += _this.ctx.measureText(_this.Title[i]).width;\n\t\t\t\tif (_strlineW > (r[0] - 20)) {\n\t\t\t\t\tif (_num == 2 && _this.LineType) {\n\t\t\t\t\t\t//文字换行数量大于二进行省略号处理\n\t\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i - 3) + '...', C_P + 10, _strHeight);\n\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t_strLastIndex = i;\n\t\t\t\t\t\t_num++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i), C_P + 10, _strHeight);\n\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t_strHeight += 20;\n\t\t\t\t\t\t_strLastIndex = i;\n\t\t\t\t\t\t_num++;\n\t\t\t\t\t}\n\t\t\t\t} else if (i == _this.Title.length - 1) {\n\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i + 1), C_P + 10, _strHeight);\n\t\t\t\t\t_strlineW = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//设置文本 end\n\t\t\t//设置价格\n\t\t\t_strlineW = C_P;\n\t\t\t_strHeight += uni.upx2px(60);\n\t\t\tif (_num == 1) {\n\t\t\t\t_strHeight += 36; //单行标题时占位符\n\t\t\t}\n\n\t\t\tif (_this.PriceTxt != '') { //判断是否有销售价格\n\t\t\t\t_this.ctx.setFillStyle(_this.PriceColor);\n\t\t\t\t_this.ctx.setFontSize(uni.upx2px(33));\n\t\t\t\t_this.ctx.fillText(_this.PriceTxt, _strlineW + 10, _strHeight-3); //商品价格\n\t\t\t\t_strlineW += _this.ctx.measureText(_this.PriceTxt).width + uni.upx2px(10);\n\t\t\t}\n\t\t\tif (_this.PriceTxt != '' && _this.OriginalTxt != '') { //判断是否有销售价格且原价\n\t\t\t\t_this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t\t_this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t\t_this.ctx.fillText(_this.OriginalTxt, _strlineW, _strHeight); //商品原价\n\t\t\t}\n\t\t\t_this.ctx.strokeStyle = _this.OriginalColor;\n\t\t\t_this.ctx.moveTo(_strlineW, _strHeight - uni.upx2px(10)); //起点\n\t\t\t_this.ctx.lineTo(_strlineW + _this.ctx.measureText(_this.OriginalTxt).width, _strHeight - uni.upx2px(10)); //终点\n\t\t\t_this.ctx.stroke();\n\t\t\t//设置价格 end\n\n\t\t\t//添加二维码\n\t\t\t_strHeight += uni.upx2px(20);\n\t\t\t_this.ctx.drawImage(_QrCode.path, r[0] - q[0] + C_P - 5, _strHeight - 13, q[0], q[1]);\n\t\t\t//添加二维码 end\n\t\t\t//添加推荐人与描述\n\t\t\t_this.ctx.setFillStyle(_this.TitleColor);\n\t\t\t_this.ctx.setFontSize(uni.upx2px(28));\n\t\t\t_this.ctx.fillText(_this.Referrer, C_P + p[0] * 0.9 + 10, _strHeight + q[1] / 2-10);\n\t\t\t_this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t_this.ctx.setFontSize(uni.upx2px(28));\n\t\t\t_this.ctx.fillText(_this.ViewDetails, C_P + p[0] * 0.9 + 10, _strHeight + q[1] / 2 + 10);\n\t\t\t//添加推荐人与描述 end\n\t\t\t_this.ctx.save();\n\t\t\t// _this.ctx.arc(C_P + q[0] * 0.4, _strHeight + p[1] * 0.4, p[0] * 0.4, 0, 2 * Math.PI);\n\t\t\tlet x1 = C_P,\n\t\t\t\ty1 = C_P - 13,\n\t\t\t\tw1 = r[0],\n\t\t\t\th1 = r[1],\n\t\t\t\tr1 = 5;\n\t\t\t_this.ctx.beginPath();\n\t\t\t_this.ctx.moveTo(x1 + r1, y1);\n\t\t\t_this.ctx.arcTo(x1 + w1, y1, x1 + w1, y1 + h1, r1);\n\t\t\t_this.ctx.arcTo(x1 + w1, y1 + h1, x1, y1 + h1, r1);\n\t\t\t_this.ctx.arcTo(x1, y1 + h1, x1, y1, r1);\n\t\t\t_this.ctx.arcTo(x1, y1, x1 + w1, y1, r1);\n\t\t\t_this.ctx.closePath();\n\t\t\t_this.ctx.shadowColor = \"#cdcdcd\";\n\t\t\t_this.ctx.shadowBlur = 4;\n\t\t\t_this.ctx.shadowOffsetX = 3;\n\t\t\t_this.ctx.shadowOffsetY = 5;\n\t\t\t_this.ctx.fill();\n\t\t\t_this.ctx.clip();\n\t\t\t_this.ctx.drawImage(_imgInfo.path, C_P, C_P, r[0], r[1]);\n\t\t\t_this.ctx.restore()\n\t\t\t// 添加头像\n\t\t\tx1 = C_P + 10, y1 = _strHeight - 2, w1 = p[0] * 0.8, h1 = p[1] * 0.8,\n\t\t\t\tr1 = 5;\n\t\t\t_this.ctx.save();\n\t\t\t_this.ctx.beginPath();\n\t\t\t// _this.ctx.arc(C_P + q[0] * 0.4, _strHeight + p[1] * 0.4, p[0] * 0.4, 0, 2 * Math.PI);\n\t\t\t_this.ctx.moveTo(x1 + r1, y1);\n\t\t\t_this.ctx.arcTo(x1 + w1, y1, x1 + w1, y1 + h1, r1);\n\t\t\t_this.ctx.arcTo(x1 + w1, y1 + h1, x1, y1 + h1, r1);\n\t\t\t_this.ctx.arcTo(x1, y1 + h1, x1, y1, r1);\n\t\t\t_this.ctx.arcTo(x1, y1, x1 + w1, y1, r1);\n\t\t\t_this.ctx.closePath();\n\t\t\t_this.ctx.shadowColor = \"#cdcdcd\";\n\t\t\t_this.ctx.shadowBlur = 4;\n\t\t\t_this.ctx.shadowOffsetX = 3;\n\t\t\t_this.ctx.shadowOffsetY = 5;\n\t\t\t_this.ctx.fill();\n\t\t\t_this.ctx.clip();\n\t\t\t_this.ctx.drawImage(_avatarUrl.path, x1, y1, p[0] * 0.8, p[1] * 0.8);\n\t\t\t_this.ctx.restore()\n\t\t\t_this.ctx.lineWidth = 3\n\t\t\t_this.ctx.strokeStyle = \"#FFFFFF\";\n\t\t\t_this.ctx.strokeRect(C_P, C_P, C_W - 2 * C_P, _this.canvasH - 2 * C_P);\n\t\t\t_this.ctx.clearRect\n\t\t\t_this.ctx.lineWidth = 30\n\t\t\t_this.ctx.strokeRect(0, 0, C_W, _this.canvasH);\n\t\t\t//添加头像 end\n\n\t\t\t//延迟后渲染至canvas上\n\t\t\t_this.ctx.draw(true, (ret) => {\n\t\t\t\t_this.$emit('hideLoading')\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t_this.getNewImage();\n\t\t\t\t}, 200);\n\t\t\t});\n\t\t},\n\t\tasync getImageInfo({\n\t\t\timgSrc\n\t\t}) {\n\t\t\treturn new Promise((resolve, errs) => {\n\t\t\t\tuni.getImageInfo({\n\t\t\t\t\tsrc: imgSrc,\n\t\t\t\t\tsuccess: function(image) {\n\t\t\t\t\t\tresolve(image);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\terrs(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetNewImage() {\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tcanvasId: _this.CanvasID,\n\t\t\t\tquality: 1,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\t_this.$emit('success', res);\n\t\t\t\t},\n\t\t\t}, this);\n\t\t}\n\n\t}\n};\n"],"sourceRoot":""}