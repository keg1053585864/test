(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/institution-activity"],{4103:function(t,e,i){"use strict";(function(t){i("1f93"),i("921b");n(i("66fd"));var e=n(i("7d08"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"7d08":function(t,e,i){"use strict";i.r(e);var n=i("f811"),o=i("f132");for(var r in o)"default"!==r&&function(t){i.d(e,t,function(){return o[t]})}(r);var u=i("2877"),s=Object(u["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},ddf6:function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{customTheme:"",institution:{name:"",contact:"",phone:"",img_url:"",video_url:"",description:"",detail:"",location:""},itemList:"",institution_id:""}},onLoad:function(t){var e=this;this.institution_id=t.id,this.customTheme=this.$store.state.customTheme,this.$http({url:"/activity_institution/"+this.institution_id,v2:!0}).then(function(t){t.detail=t.detail.replace(/\<img/gi,'<img style="width:100%;height:auto" '),t.video_url&&t.video_url.split("/page/")[1]?(t.video_url=t.video_url.split("/page/")[1].split(".html")[0],e.getVideoInfo(t.video_url)):t.video_url="",e.institution=t}),this.getItemList(this.institution_id)},methods:{getItemList:function(t){var e=this;this.$http({url:"/activity_institution/".concat(t,"/items"),v2:!0,loading:"none"}).then(function(t){e.itemList=t})},getVideoInfo:function(t){var e=this,i="https://vv.video.qq.com/getinfo?otype=json&appver=3.2.19.333&platform=11&defnpayver=1&vid="+t;wx.request({url:i,success:function(i){console.log(i);var o=i.data.replace(/QZOutputJson=/,"")+"qwe",r=o.replace(/;qwe/,""),u=JSON.parse(r),s=u.vl.vi[0].lnk;n=u["vl"]["vi"][0]["ul"]["ui"][0]["url"];var a=u["fl"]["fi"],l=u["vl"]["vi"][0]["cl"]["fc"];if(0==parseInt(l)&&(l=1),a.length>2)for(var c=a[a.length-1]["id"],d=1;d<l+1;d++){var f=s+".p"+c%1e4+"."+d+".mp4";e.requestVideoUrls(c,t,f)}else for(var v=a[a.length-1]["id"],p=1;p<l+1;p++){var h=s+".mp4";e.requestVideoUrls(v,t,h)}}})},requestVideoUrls:function(t,e,i){var o="https://vv.video.qq.com/getkey?otype=json&platform=11&format="+t+"&vid="+e+"&filename="+i+"&appver=3.2.19.333",r=this;wx.request({url:o,success:function(t){var e=t.data.replace(/QZOutputJson=/,"")+"qwe",o=e.replace(/;qwe/,""),u=JSON.parse(o);if(void 0!=u.key){var s=u["key"],a=n+i+"?vkey="+s;console.log(String(a),n),r.institution.video_url=String(a)}}})}}};e.default=o},f132:function(t,e,i){"use strict";i.r(e);var n=i("ddf6"),o=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=o.a},f811:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})}},[["4103","common/runtime","common/vendor"]]]);